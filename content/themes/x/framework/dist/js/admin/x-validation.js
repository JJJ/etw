var xValidationData=function(e){var t={};function n(a){if(t[a]){return t[a].exports}var o=t[a]={i:a,l:false,exports:{}};e[a].call(o.exports,o,o.exports,n);o.l=true;return o.exports}n.m=e;n.c=t;n.d=function(e,t,a){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:a})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=0)}([function(e,t,n){"use strict";var a=n(1);var o=r(a);var s=n(2);var i=r(s);function r(e){return e&&e.__esModule?e:{default:e}}var c=window.xValidationData;i.default.addDataSource(c);(function(){if(!c.modules||!c.notices){return}for(var e in c.modules){var t=c.modules[e];if(t.notices){for(var n in t.notices){if(-1!==c.notices.indexOf(n)){i.default.showNotice(t.notices[n])}}}}})();i.default.addModule("x-auto-configure-cornerstone",function(e,t,n){var a=e.data("tco-module-state");if("install"===a){o()}if("activate"===a){s()}function o(){i.default.ajax({action:"x_auto_install_cornerstone",done:function e(t){s(function(){c(t)})},fail:r})}function s(e){i.default.ajax({action:"x_auto_activate_cornerstone",done:"function"===typeof e?e:c,fail:r})}function r(e){if(!e||!e.message){var t={message:n.errors[a]||n.errors.install};if(e.status&&e.statusText){t.errorDetails=e.status+" "+e.statusText}e=t}c(e)}function c(e){if(!e){return}if(e.message){var t=i.default.showNotice(e.message)}if(t&&e.errorDetails){t.find("[data-tco-error-details]").click(function(t){t.preventDefault();i.default.confirm({message:e.errorDetails,acceptBtn:"",declineBtn:n.errorBack,class:"tco-confirm-error"})})}}});i.default.addModule("x-validation",function(e,t,n){var a=t["message"]||false,s=t["button"]||false,r=t["overlay"]||false,c=t["input"]||false,l=t["form"]||false,u=t["preload-key"]||false;if(!a||!s||!r||!c||!l||!u){return}l.on("submit",function(t){t.preventDefault();c.prop("disabled",true);e.tcoShowMessage(n.verifying);i.default.ajax({action:"x_validation",code:c.val(),done:f,fail:g})});var d=u.val();if("string"===typeof d&&d.length>1){c.val(d);l.submit()}function f(t){if(!t.message){return g(t)}if(t.complete){e.tcoShowMessage(t.message);setTimeout(p,2500)}else{m(t)}}function m(t){a.html(t.message);s.html(t.button);var n=650;setTimeout(function(){e.tcoShowMessage("")},n*2);setTimeout(function(){r.addClass("tco-active")},n*3);if(t.url){s.attr("href",t.url);if(t.newTab){s.attr("target","_blank")}}else{s.attr("href","#")}s.off("click");if(t.dismiss){s.click(function(){r.removeClass("tco-active");e.tcoRemoveMessage();setTimeout(function(){c.val("").prop("disabled",false)},n*2)})}}function p(){var e=i.default.queryString.parse(window.location.search);delete e["tco-key"];e.notice="validation-complete";window.location.search=i.default.queryString.stringify(e)}function g(e){var t=e.message?e.message:e;if(t.responseText){t=t.responseText}m({message:n.error,button:n.errorButton,dismiss:true});a.find("[data-tco-error-details]").click(function(e){e.preventDefault();i.default.confirm({message:t,acceptBtn:"",declineBtn:n.errorButton,class:"tco-confirm-error"})});console.log(e)}(0,o.default)("body").on("click",'a[data-tco-focus="validation-input"]',function(e){e.preventDefault();c.focus()})});i.default.addModule("x-validation-revoke",function(e,t,n){var a=t["revoke"]||false;if(!a){return}a.click(function(){i.default.confirm({message:n.confirm,acceptClass:"tco-btn-nope",acceptBtn:n.accept,declineBtn:n.decline,accept:function e(){a.removeAttr("href");a.html(n.revoking);i.default.ajax({action:"x_validation_revoke",done:o,fail:o})}})});function o(){var e=i.default.queryString.parse(i.default.queryString.extract(window.location.href));delete e["tco-key"];e.notice="validation-revoked";window.location.search=i.default.queryString.stringify(e)}});i.default.addModule("x-automatic-updates",function(e,t,n){var a=t["check-now"]||false,o=t["latest-available"]||false;if(!a||!o){return}if(n.latest){o.html(n.latest)}a.find("a").click(function(e){e.preventDefault();a.html(n.checking);i.default.ajax({action:"x_update_check",done:function e(t){if(t.latest&&t.latest!==n.latest){a.html(n.completeNew);o.html(t.latest)}else{a.html(n.complete)}},fail:function e(t){console.warn("X Update Check Error",t);a.html(n.error)}})})});i.default.addModule("x-theme-options-manager",function(e,t,n){var a=t["import-form"]||false,o=t["import-file"]||false,s=t["export"]||false,r=t["reset"]||false;if(!a||!o||!s||!r){return}s.on("click",function(){e.tcoShowMessage(n.export,1500)});if(f()){a.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault();e.stopPropagation()}).on("dragover dragenter",function(){a.addClass("tco-dragover")}).on("dragleave dragend drop",function(){a.removeClass("tco-dragover")}).on("drop",function(e){c(e.originalEvent.dataTransfer.files[0])});o[0].onchange=function(){c(this.files[0])}}else{e.tcoShowMessage(n.useModernBrowser,2500)}function c(e){i.default.confirm({message:n.importConfirm,acceptClass:"tco-btn-nope",acceptBtn:n.yep,declineBtn:n.nope,accept:function t(){l(e)},decline:function e(){d()}})}function l(t){e.tcoShowMessage(n.importBegin);var a=new FileReader;a.onload=function(){try{JSON.parse(a.result);u(a.result)}catch(t){e.tcoShowMessage(n.importError,2500);console.log("X Customizer Manager Import Error",t)}};try{a.readAsText(t)}catch(t){e.tcoShowMessage(n.importError,2500);console.log("X Customizer Manager Import Error",t)}}function u(t){i.default.ajax({action:"x_theme_options_manager_import",import:t,done:function t(){e.tcoShowMessage(n.importSuccess,2500);d()},fail:function t(a){console.warn("X Customizer Import Error",a);e.tcoShowMessage(n.importError,2500);d()}})}function d(){o[0].value="";o[0].type="";o[0].type="file"}r.click(function(t){t.preventDefault();i.default.confirm({message:n.resetConfirm,acceptClass:"tco-btn-nope",acceptBtn:n.yep,declineBtn:n.nope,accept:function t(){e.tcoShowMessage(n.resetBegin);i.default.ajax({action:"x_theme_options_manager_reset",done:function t(){e.tcoShowMessage(n.resetSuccess,2500)},fail:function t(a){console.warn("X Customizer Reset Error",a);e.tcoShowMessage(n.resetError,2500)}})}})});function f(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}});i.default.addModule("x-demo-content",function(e,t,n){var a=t["select"]||false,s=t["select-group-expanded"]||false,r=t["select-group-standard"]||false,c=t["demo-link"]||false,l=t["setup-button"]||false;if(!a||!s||!r||!c||!l){return}o.default.each(n.demos.expanded_demos,function(e,t){s.append(u(e,t,"expanded"))});o.default.each(n.demos.standard_demos,function(e,t){r.append(u(e,t,"standard"))});function u(e,t,n){return(0,o.default)('<option data-demo-type="'+n+'" value="'+e+'">'+t.title+"</option>")}f();a.on("change",f);function d(){var e=a.find(":selected");var t="expanded"===e.data("demo-type");var o=t?"expanded_demos":"standard_demos";var s=e.val();var i=n.demos[o][s]||{};i.name=s;i.expanded=t;return i}function f(){var e=d();c.attr("href",e.demo_url)}l.click(function(e){e.preventDefault();i.default.confirm({message:n.strings.confirm,acceptClass:"tco-btn-nope",acceptBtn:n.strings.yep,declineBtn:n.strings.nope,accept:m})});function m(){var e=d();x.init({demo:e.expanded?e.name:e.url},e.expanded)}function p(e){l.prop("disabled",!e)}var g=function e(){this.$el=(0,o.default)(this.markup);this.$message=this.$el.find(".tco-progress-title");this.$bar=this.$el.find(".tco-progress-bar-inner")};o.default.extend(g.prototype,{markup:'<div class="tco-modal-outer">'+'<div class="tco-modal-inner">'+'<div class="tco-progress">'+'<div class="tco-progress-title"></div>'+'<div class="tco-progress-bar-outer">'+'<div class="tco-progress-bar-inner"></div>'+"</div>"+"</div>"+'<div class="tco-progress-complete">'+'<div class="tco-progress-complete-icon dashicons dashicons-yes"></div>'+'<div class="tco-progress-complete-title">'+n.strings.complete+"</div>"+"</div>"+"</div>"+"</div>",start:function e(){this.message(n.strings.start);this.$el.addClass("tco-processing");(0,o.default)("body").prepend(this.$el);setTimeout(function(){this.$el.addClass("tco-active")}.bind(this),0);this.setProgress(0)},message:function e(t){this.$message.html(t)},setProgress:function e(t){t=t*.9+.1;this.$bar.css("width",Math.round(t*100)+"%")},simulateProgress:function e(){this.message(n.strings.simulated);this.$bar.animate({width:"80%"},250)},complete:function e(){this.message("&nbsp;");this.$bar.animate({width:"100%"},250);setTimeout(function(){this.$el.removeClass("tco-processing");this.close()}.bind(this),400)},fail:function e(t){this.message(t);this.close()},close:function e(){setTimeout(function(){this.$el.removeClass("tco-active")}.bind(this),1500);setTimeout(function(){this.$el.detach();this.setProgress(0);this.message("")}.bind(this),2e3)}});var h=function e(){};o.default.extend(h.prototype,{init:function e(t,n){this.demoData=t;this.demoData.action=n?"x_demo_importer":"x_demo_content_setup";this.demoData.attempts=1;this.demoData._tco_nonce=window.tcoCommon._tco_nonce;if(!n){return this.runStandard()}this.demoData.session="s_"+Math.round((new Date).getTime()+Math.random()*100);v.start();p(false);this.acknowledge({data:{},first:true})},runStandard:function e(){v.start();v.simulateProgress();p(false);this.standardProcess(function(e){if(e.success===false){return this.failure(e.data.message,e)}v.complete();p(true)}.bind(this))},standardProcess:function e(t){o.default.post(window.ajaxurl,this.demoData,t).fail(function(e){v.message(this.timeOutMessage(this.demoData.attempts++));if(this.demoData.attempts>=25){return this.failure(e.strings.failure,e)}this.standardProcess(t)}.bind(this))},acknowledge:function e(t){if(!t.data&&!t.first){v.message(this.timeOutMessage(this.demoData.attempts++));if(this.demoData.attempts>25){return this.failure(n.strings.failure,t)}}else{this.demoData.attempts=0;if(false===t.success){return this.failure(t.data.message,t.data)}if(t.data.message){v.message(t.data.message)}if(t.data.debug_message&&n.strings.debug){console.log("X Demo Debug",t.data.debug_message,t.data.debug||null)}if(t.data.completion&&t.data.completion===true){if(t.data.debug&&n.strings.debug){console.log(t.data.debug)}return this.complete()}if(t.data.completion){v.setProgress(t.data.completion.ratio)}}setTimeout(function(){o.default.post(window.ajaxurl,this.demoData).always(this.acknowledge.bind(this))}.bind(this),40*this.demoData.attempts)},complete:function e(){v.complete();p(true)},failure:function e(t,n){v.fail(t);p(true);console.error("X Demo Importer failure",n||{})},timeOutMessage:function e(t){if(t>20){return n.strings.timeout3}if(t>10){return n.strings.timeout2}return n.strings.timeout1}});var v=new g;var x=new h});i.default.addModule("x-extension",function(e,t,n){var a=t["install"]||false,o=e.attr("id"),s="undefined"!==typeof e.data("x-extension")?n.extensions[o]:n.approvedPlugins[o];if(!a||!s){return}if(s.activated){a.html(n.activated).addClass("tco-btn-yep tco-btn-disabled");return}else if(s.installed){f();return}if(!window._xExtensionQueue){window._xExtensionQueue={running:false,queue:[]}}a.on("click",r);function r(){a.prop("disabled",true);if(window._xExtensionQueue.running){e.tcoShowMessage("Waiting to install&hellip;");window._xExtensionQueue.queue.unshift(l)}else{l();window._xExtensionQueue.running=true}}function c(){if(0<window._xExtensionQueue.queue.length){var e=window._xExtensionQueue.queue.pop();e()}else{window._xExtensionQueue.running=false}}function l(){e.tcoShowMessage("Installing&hellip;");i.default.ajax({action:"x_extensions_installer",plugin:s.plugin,package:s.package,slug:s.slug,done:u,fail:d})}function u(t){console.log("Installed",t);f();e.tcoRemoveMessage(false,function(){e.removeClass("tco-extension-not-installed").addClass("tco-extension-installed")});c()}function d(t){var a=t.message?t.message:t;if(a.responseText){a=a.responseText}e.tcoShowErrorMessage(n.error,a);console.log(t);c()}function f(){a.off("click",r);a.html(n.installed).attr("href",n.pluginsURI)}})},function(e,t){e.exports=window.jQuery},function(e,t){e.exports=window.tco}]);
//# sourceMappingURL=x-validation.js.map