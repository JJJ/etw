var tco="object"==typeof tco?tco:{};tco.xValidationData=function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}({0:function(e,t){e.exports=window.jQuery},2:function(e,t){e.exports=window.tco},37:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(2),s=n.n(i),r=window.xValidationData;s.a.addDataSource(r),function(){if(r.modules&&r.notices)for(var e in r.modules){var t=r.modules[e];if(t.notices)for(var n in t.notices)-1!==r.notices.indexOf(n)&&s.a.showNotice(t.notices[n])}}(),s.a.addModule("x-auto-configure-cornerstone",function(e,t,n){var o=e.data("tco-module-state");function a(e){s.a.ajax({action:"x_auto_activate_cornerstone",done:"function"==typeof e?e:r,fail:i})}function i(e){if(!e||!e.message){var t={message:n.errors[o]||n.errors.install};e.status&&e.statusText&&(t.errorDetails=e.status+" "+e.statusText),e=t}r(e)}function r(e){if(e){if(e.message)var t=s.a.showNotice(e.message);t&&e.errorDetails&&t.find("[data-tco-error-details]").on("click",function(t){t.preventDefault(),s.a.confirm({message:e.errorDetails,acceptBtn:"",declineBtn:n.errorBack,class:"tco-confirm-error"})})}}"install"===o&&s.a.ajax({action:"x_auto_install_cornerstone",done:function(e){a(function(){r(e)})},fail:i}),"activate"===o&&a()}),s.a.addModule("x-validation",function(e,t,n){var o=t.message||!1,i=t.button||!1,r=t.overlay||!1,c=t.input||!1,d=t.form||!1,l=t["preload-key"]||!1;if(o&&i&&r&&c&&d&&l){d.on("submit",function(t){t.preventDefault(),c.prop("disabled",!0),e.tcoShowMessage(n.verifying),s.a.ajax({action:"x_validation",code:c.val(),done:f,fail:g})});var u=l.val();"string"==typeof u&&u.length>1&&(c.val(u),d.submit()),a()("body").on("click",'a[data-tco-focus="validation-input"]',function(e){e.preventDefault(),c.focus()})}function f(t){if(!t.message)return g(t);t.complete?(e.tcoShowMessage(t.message),setTimeout(p,2500)):m(t)}function m(t){o.html(t.message),i.html(t.button);setTimeout(function(){e.tcoShowMessage("")},1300),setTimeout(function(){r.addClass("tco-active")},1950),t.url?(i.attr("href",t.url),t.newTab&&i.attr("target","_blank")):i.attr("href","#"),i.off("click"),t.dismiss&&i.on("click",function(){r.removeClass("tco-active"),e.tcoRemoveMessage(),setTimeout(function(){c.val("").prop("disabled",!1)},1300)})}function p(){var e=s.a.queryString.parse(window.location.search);delete e["tco-key"],e.notice="validation-complete",window.location.search=s.a.queryString.stringify(e)}function g(e){var t=e.message?e.message:e;t.responseText&&(t=t.responseText),m({message:n.error,button:n.errorButton,dismiss:!0}),o.find("[data-tco-error-details]").on("click",function(e){e.preventDefault(),s.a.confirm({message:t,acceptBtn:"",declineBtn:n.errorButton,class:"tco-confirm-error"})}),console.log(e)}}),s.a.addModule("x-validation-revoke",function(e,t,n){var o=t.revoke||!1;function a(){var e=s.a.queryString.parse(s.a.queryString.extract(window.location.href));delete e["tco-key"],e.notice="validation-revoked",window.location.search=s.a.queryString.stringify(e)}o&&o.on("click",function(){s.a.confirm({message:n.confirm,acceptClass:"tco-btn-nope",acceptBtn:n.accept,declineBtn:n.decline,accept:function(){o.removeAttr("href"),o.html(n.revoking),s.a.ajax({action:"x_validation_revoke",done:a,fail:a})}})})}),s.a.addModule("x-automatic-updates",function(e,t,n){var o=t["check-now"]||!1,a=t["latest-available"]||!1;o&&a&&(n.latest&&a.html(n.latest),o.find("a").on("click",function(e){e.preventDefault(),o.html(n.checking),s.a.ajax({action:"x_update_check",done:function(e){e.latest&&e.latest!==n.latest?(o.html(n.completeNew),a.html(e.latest)):o.html(n.complete)},fail:function(e){console.warn("X Update Check Error",e),o.html(n.error)}})}))}),s.a.addModule("x-theme-options-manager",function(e,t,n){var o=t["import-form"]||!1,a=t["import-file"]||!1,i=t.export||!1,r=t.reset||!1;function c(t){s.a.confirm({message:n.importConfirm,acceptClass:"tco-btn-nope",acceptBtn:n.yep,declineBtn:n.nope,accept:function(){!function(t){e.tcoShowMessage(n.importBegin);var o=new FileReader;o.onload=function(){try{JSON.parse(o.result),function(t){s.a.ajax({action:"x_theme_options_manager_import",import:t,done:function(){e.tcoShowMessage(n.importSuccess,2500),d()},fail:function(t){console.warn("X Customizer Import Error",t),e.tcoShowMessage(n.importError,2500),d()}})}(o.result)}catch(t){e.tcoShowMessage(n.importError,2500),console.log("X Customizer Manager Import Error",t)}};try{o.readAsText(t)}catch(t){e.tcoShowMessage(n.importError,2500),console.log("X Customizer Manager Import Error",t)}}(t)},decline:function(){d()}})}function d(){a[0].value="",a[0].type="",a[0].type="file"}o&&a&&i&&r&&(i.on("click",function(){e.tcoShowMessage(n.export,1500)}),!function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}()?e.tcoShowMessage(n.useModernBrowser,2500):(o.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){o.addClass("tco-dragover")}).on("dragleave dragend drop",function(){o.removeClass("tco-dragover")}).on("drop",function(e){c(e.originalEvent.dataTransfer.files[0])}),a[0].onchange=function(){c(this.files[0])}),r.on("click",function(t){t.preventDefault(),s.a.confirm({message:n.resetConfirm,acceptClass:"tco-btn-nope",acceptBtn:n.yep,declineBtn:n.nope,accept:function(){e.tcoShowMessage(n.resetBegin),s.a.ajax({action:"x_theme_options_manager_reset",done:function(){e.tcoShowMessage(n.resetSuccess,2500)},fail:function(t){console.warn("X Customizer Reset Error",t),e.tcoShowMessage(n.resetError,2500)}})}})}))}),s.a.addModule("x-demo-content",function(e,t,n){var o=t.select||!1,i=t["select-group-expanded"]||!1,r=t["select-group-standard"]||!1,c=t["demo-link"]||!1,d=t["setup-button"]||!1;if(o&&i&&r&&c&&d){a.a.each(n.demos.expanded_demos,function(e,t){i.append(p(e,t,"expanded"))}),a.a.each(n.demos.standard_demos,function(e,t){r.append(p(e,t,"standard"))}),h(),o.on("change",h),d.on("click",function(e){e.preventDefault(),s.a.confirm({message:n.strings.confirm,acceptClass:"tco-btn-nope",acceptBtn:n.strings.yep,declineBtn:n.strings.nope,accept:v})});var l=function(){this.$el=a()(this.markup),this.$message=this.$el.find(".tco-progress-title"),this.$bar=this.$el.find(".tco-progress-bar-inner")};a.a.extend(l.prototype,{markup:'<div class="tco-modal-outer"><div class="tco-modal-inner"><div class="tco-progress"><div class="tco-progress-title"></div><div class="tco-progress-bar-outer"><div class="tco-progress-bar-inner"></div></div></div><div class="tco-progress-complete"><div class="tco-progress-complete-icon dashicons dashicons-yes"></div><div class="tco-progress-complete-title">'+n.strings.complete+"</div></div></div></div>",start:function(){this.message(n.strings.start),this.$el.addClass("tco-processing"),a()("body").prepend(this.$el),setTimeout(function(){this.$el.addClass("tco-active")}.bind(this),0),this.setProgress(0)},message:function(e){this.$message.html(e)},setProgress:function(e){e=.9*e+.1,this.$bar.css("width",Math.round(100*e)+"%")},simulateProgress:function(){this.message(n.strings.simulated),this.$bar.animate({width:"80%"},250)},complete:function(){this.message("&nbsp;"),this.$bar.animate({width:"100%"},250),setTimeout(function(){this.$el.removeClass("tco-processing"),this.close()}.bind(this),400)},fail:function(e){this.message(e),this.close()},close:function(){setTimeout(function(){this.$el.removeClass("tco-active")}.bind(this),1500),setTimeout(function(){this.$el.detach(),this.setProgress(0),this.message("")}.bind(this),2e3)}});var u=function(){};a.a.extend(u.prototype,{init:function(e,t){if(this.demoData=e,this.demoData.action=t?"x_demo_importer":"x_demo_content_setup",this.demoData.attempts=1,this.demoData._tco_nonce=window.tcoCommon._tco_nonce,!t)return this.runStandard();this.demoData.session="s_"+Math.round((new Date).getTime()+100*Math.random()),f.start(),x(!1),this.acknowledge({data:{},first:!0})},runStandard:function(){f.start(),f.simulateProgress(),x(!1),this.standardProcess(function(e){if(!1===e.success)return this.failure(e.data.message,e);f.complete(),x(!0)}.bind(this))},standardProcess:function(e){a.a.post(window.ajaxurl,this.demoData,e).fail(function(t){if(f.message(this.timeOutMessage(this.demoData.attempts++)),this.demoData.attempts>=25)return this.failure(t.strings.failure,t);this.standardProcess(e)}.bind(this))},acknowledge:function(e){if(e.data||e.first){if(this.demoData.attempts=0,!1===e.success)return this.failure(e.data.message,e.data);if(e.data.message&&f.message(e.data.message),e.data.debug_message&&n.strings.debug&&console.log("X Demo Debug",e.data.debug_message,e.data.debug||null),e.data.completion&&!0===e.data.completion)return e.data.debug&&n.strings.debug&&console.log(e.data.debug),this.complete();e.data.completion&&f.setProgress(e.data.completion.ratio)}else if(f.message(this.timeOutMessage(this.demoData.attempts++)),this.demoData.attempts>25)return this.failure(n.strings.failure,e);setTimeout(function(){a.a.post(window.ajaxurl,this.demoData).always(this.acknowledge.bind(this))}.bind(this),40*this.demoData.attempts)},complete:function(){f.complete(),x(!0)},failure:function(e,t){f.fail(e),x(!0),console.error("X Demo Importer failure",t||{})},timeOutMessage:function(e){return e>20?n.strings.timeout3:e>10?n.strings.timeout2:n.strings.timeout1}});var f=new l,m=new u}function p(e,t,n){return a()('<option data-demo-type="'+n+'" value="'+e+'">'+t.title+"</option>")}function g(){var e=o.find(":selected"),t="expanded"===e.data("demo-type"),a=t?"expanded_demos":"standard_demos",i=e.val(),s=n.demos[a][i]||{};return s.name=i,s.expanded=t,s}function h(){var e=g();c.attr("href",e.demo_url)}function v(){var e=g();m.init({demo:e.expanded?e.name:e.url},e.expanded)}function x(e){d.prop("disabled",!e)}}),s.a.addModule("x-extension",function(e,t,n){var o=t.manage||!1,a=e.attr("id");if(o&&a){var i=n.extensions.find(function(e){return a===e.slug})||n.approvedPlugins.find(function(e){return a===e.slug});if(i)if(i.activated)o.html(n.activated).addClass("tco-btn-yep tco-btn-disabled");else{i.installed&&o.html(n.activate),window._xExtensionQueue||(window._xExtensionQueue={running:!1,queue:[]}),o.on("click",function(){o.prop("disabled",!0);var t="install";i.installed&&(t="activate");i.activated&&(t="deactivate");window._xExtensionQueue.running?(e.tcoShowMessage(r[t]),window._xExtensionQueue.queue.unshift(c[t])):(c[t](),window._xExtensionQueue.running=!0)});var r={install:n["waiting-to-install"],activate:n["waiting-to-activate"]},c={install:function(){e.tcoShowMessage(n.installing);s.a.ajax({action:"x_extensions_install",slug:i.slug,done:function(){o.html(n.activate),e.tcoRemoveMessage(!1,function(){e.removeClass("tco-extension-not-installed").addClass("tco-extension-installed")}),i.installed=!0,d()},fail:l})},activate:function(){e.tcoShowMessage(n.activating);s.a.ajax({action:"x_extensions_activate",plugin:i.plugin,done:function(t){console.log("Installed",t),o.html(n.installed),e.tcoRemoveMessage(!1,function(){o.html(n.activated).addClass("tco-btn-yep tco-btn-disabled")}),i.activated=!0,d()},fail:l})}}}}function d(){0<window._xExtensionQueue.queue.length?window._xExtensionQueue.queue.pop()():window._xExtensionQueue.running=!1}function l(t){var o=t.message?t.message:t;o.responseText&&(o=o.responseText),e.tcoShowErrorMessage(n.error,o),console.log(t),d()}})}});
//# sourceMappingURL=x-validation.js.map