var dashboardPostEditor=function(t){var e={};function n(o){if(e[o]){return e[o].exports}var i=e[o]={i:o,l:false,exports:{}};t[o].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=t;n.c=e;n.d=function(t,e,o){if(!n.o(t,e)){Object.defineProperty(t,e,{configurable:false,enumerable:true,get:o})}};n.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};n.d(e,"a",e);return e};n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};n.p="";return n(n.s=1)}([function(t,e){t.exports=window.tco},function(t,e,n){"use strict";var o=n(2);var i=d(o);var r=n(0);var a=d(r);var c=n(3);var s=d(c);function d(t){return t&&t.__esModule?t:{default:t}}var u=window.wp;(0,i.default)(function(){var t=window.csDashboardPostEditorData;var e=window._;function n(e){return t.strings[e]||""}var o,r,c;o=(0,i.default)(t.editorTabMarkup);r=(0,i.default)("#postdivrich");r.after(o);c=(0,i.default)('<button type="button" id="content-cornerstone" class="wp-switch-editor switch-cornerstone">'+n("cornerstone-tab")+"</button>");r.find(".wp-editor-tabs").append(c);var d=function t(){r.hide();o.show();var n=function t(){(0,i.default)(".composer-switch").css({visibility:"hidden"})};e.defer(n);(0,i.default)(window).on("load",n)};o.find("#content-tmce, #content-html").click(function(){var e=-1!==(0,i.default)(this).attr("id").indexOf("html");function c(){r.show();(0,i.default)(window).trigger("scroll.editor-expand","scroll");o.hide();(0,i.default)(".composer-switch").css({visibility:"visible"});window.switchEditors.go("content",e?"html":"tmco")}if("true"===t.usesCornerstone){a.default.confirm({message:n("manual-edit-warning"),acceptClass:"tco-btn-nope",acceptBtn:n("manual-edit-accept"),declineBtn:n("manual-edit-decline"),accept:function e(){if("new"!==t.post_id){u.ajax.post("cs_override",{post_id:t.post_id,_cs_nonce:t._cs_nonce})}t.usesCornerstone="false";c()}});return}c()});c.click(function(){if("false"===t.usesCornerstone&&"new"!==t.post_id&&""!==u.autosave.getPostData().content){a.default.confirm({message:n("overwrite-warning"),acceptClass:"tco-btn-nope",acceptBtn:n("overwrite-accept"),declineBtn:n("overwrite-decline"),accept:function e(){t.usesCornerstone="none";d()}});return}d()});if("true"===t.usesCornerstone){d()}window.localStorage.removeItem("cornerstone_auto_draft");o.find("#cs-edit-button").on("click",function(e){e.preventDefault();e.stopPropagation();if(null!==t.editURL){window.location=t.editURL;return}(0,i.default)("#title-prompt-text").hide();var o=(0,i.default)("#title");var r=o.val();if(!r||"title"===r){o.val(n("default-title"))}u.autosave.server.triggerSave();(0,i.default)(document).on("heartbeat-tick.autosave",function(){var e=u.autosave.getPostData();var n="?page_id=";if("post"===e.post_type){n="?p="}if("post"!==e.post_type&&"page"!==e.post_type){n="?post_type="+e.post_type+"&p="}window.localStorage.setItem("cornerstone_auto_draft",e.post_id);(0,i.default)(window).off("beforeunload.edit-post");window.location=t.homeURL+n+e.post_id+"&preview=true&cornerstone=1"})});if(window.YoastSEO){setTimeout(s.default,0)}})},function(t,e){t.exports=window.jQuery},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=function(){var t=a().match(/\[cs_content.*?\[\/cs_content\]/gi);if(!window.YoastSEO||!t){return}window.YoastSEO.app.registerPlugin("csContent",{status:"loading"});window.YoastSEO.app.registerPlugin("csContentPre",{status:"ready"});window.YoastSEO.app.registerModification("content",o,"csContentPre");var e=t.map(function(t){return t.replace("[cs_content]",'[cs_content _p="'+window.csDashboardPostEditorData.post_id+'" no_wrap=true]')});i.default.ajax({data:{content:e},action:"cs_yoast_do_shortcode",_cs_nonce:window.csDashboardPostEditorData._cs_nonce,done:function t(e){var o=e.content;n=o;window.YoastSEO.app.pluginReady("csContent");window.YoastSEO.app.registerModification("content",r,"csContent",100)},fail:function t(e){console.warn("Unable to process content builder shortcodes for Yoast",e);window.YoastSEO.app.pluginReady("csContent")}});var n=[];function o(e){if(t){t.forEach(function(t,n){e=e.replace(t,"\x3c!--cs-content-yoast-"+n+"--\x3e")})}return e}function r(t){var e=t.match(/<!--cs-content-yoast-\d-->/gi);if(e){e.forEach(function(e){var o=parseInt(e.replace("\x3c!--cs-content-yoast-","").replace("--\x3e",""));if(!isNaN(o)&&undefined!==n[o]){t=t.replace(e,n[o])}})}return t}};var o=n(0);var i=r(o);function r(t){return t&&t.__esModule?t:{default:t}}function a(){var t=window.document.getElementById("content")&&window.document.getElementById("content").value||"";if(typeof window.tinyMCE!=="undefined"&&typeof window.tinyMCE.editors!=="undefined"&&window.tinyMCE.editors.length!==0){t=window.tinyMCE.get("content")&&window.tinyMCE.get("content").getContent()||""}return t}}]);
//# sourceMappingURL=dashboard-post-editor.js.map