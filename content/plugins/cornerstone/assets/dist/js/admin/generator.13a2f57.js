var tco="object"==typeof tco?tco:{};tco.generator=function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=43)}({0:function(e,t){e.exports=window.jQuery},43:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o);window.csg=window.csg||{};var i=window.csg,l=window._,s=window.Backbone;i.Templates={"blank-state":'<div class="csg-intro"><p><% print(csg.l18n("blank-window")); %></p></div>',modal:'<div class="csg-modal"><header><h1><%= csg.l18n("modal-title") %></h1><a class="csg-modal-btn csg-modal-toggle-advanced" href="#"><span class="dashicons dashicons-media-code"></span><span class="tip"><%= csg.l18n("modal-toggle-advanced") %></span></a><a class="csg-modal-btn csg-modal-close" href="#"><span class="dashicons dashicons-no"></span></a></header><div class="csg-modal-content"><section class="csg-modal-sidebar"></section><section class="csg-modal-main" role="main"></section></div><footer><button id="btn-ok" disabled class="button button-primary button-large"><%= csg.l18n("modal-insert-shortcode") %></button></footer></div><div class="csg-modal-backdrop">&nbsp;</div>',preview:'<h2 class="csg-preview-title"><% print(csg.l18n("preview-title")); %></h2><div class="csg-preview-content"><p><% print(csgData.previewContentBefore) %></p><p><a class="button" href="<%= demo %>" target="_blank"><% print(csg.l18n("preview-button")); %></a></p><p><% print(csgData.previewContentAfter) %></p></div>',"controls/checkbox":'<label for="param-<%= param_name %>"><strong><%= heading %></strong><span><%= description %></span></label><input type="checkbox" id="param-<%= param_name %>" name="param-<%= param_name %>" value="<%= value %>" />',"controls/color-picker":'<label for="param-<%= param_name %>"><strong><%= heading %></strong><span><%= description %></span></label><input type="text" name="param-<%= param_name %>" id="param-<%= param_name %>" class="wp-color-picker" value="" size="30" />',"controls/dropdown":'<label for="param-<%= param_name %>"><strong><%= heading %></strong><span><%= description %></span></label><select name="param-<%= param_name %>" id="param-<%= param_name %>"><% _.each(value, function(option, name) { %><option value="<% print( option.value || option ) %>"><% print( (option.value) ? name : option) %> </option><% }); %></select>',"controls/image-upload":'<label for="param-<%= param_name %>"><strong><%= heading %></strong><span><%= description %></span></label><div class="csg-image-uploader"><a href="#" class="csg-img-control set"><span class="dashicons dashicons-plus"></span></a><a href="#" class="csg-img-control remove hidden"><span class="dashicons dashicons-no"></span></a></div><input type="hidden" name="param-<%= param_name %>" id="param-<%= param_name %>" />',"controls/text-area":'<label for="param-<%= param_name %>"><strong><%= heading %></strong><span><%= description %></span></label><textarea name="param-<%= param_name %>" id="param-<%= param_name %>" rows="8" cols="5"></textarea>',"controls/text":'<label for="param-<%= param_name %>"><strong><%= heading %></strong><span><%= description %></span></label><input type="text" name="param-<%= param_name %>" id="param-<%= param_name %>" value="<%= value %>" size="30" />'},i.template=function(){return l.template(this.Templates[1===arguments.length?arguments[0]:arguments.join("/")])},i.l18n=function(e){return window.csgData.strings[e]||""};var r={},c={};r.Control=s.Model.extend({defaults:{param_name:"generic-param",heading:"Generic Control",description:"",type:"Generic",default_value:"",value:null}}),r.Shortcode=s.Model.extend({defaults:{id:"generic-shortcode",title:"Generic Shortcode",icon:"icon",section:"Generic",description:"A Shortcode Description",params:[],demo:""},setSelected:function(){this.collection.setSelected(this)}}),r.ShortcodeCollection=s.Collection.extend({model:r.Shortcode,url:window.csgData.shortcodeCollectionUrl,selected:null,section:function(e){return new r.ShortcodeCollection(this.filter(function(t){return t.get("section")===e}))},setSelected:function(e){this.selected=e,this.trigger("new_selection")}}),r.ControlCollection=s.Collection.extend({model:r.Control}),c.ControlBase=s.View.extend({className:"csg-control",template:i.template("controls/text"),renderSuper:function(){return!0===this.model.get("advanced")&&this.$el.addClass("advanced"),this.$el.html(this.template(this.model.toJSON())),this},render:function(){return this.renderSuper(),this.bindInput(),this},bindInput:function(){var e=this.model;e.set("data",this.$("#param-".concat(e.get("param_name"))).val()),this.$("#param-".concat(e.get("param_name"))).on("change",function(){e.set("data",a()(this).val())})}},{makeControl:function(e,t){var n={base:c.ControlBase,textfield:c.ControlText,textarea:c.ControlTextArea,textarea_html:c.ControlTextArea,dropdown:c.ControlDropdown,checkbox:c.ControlCheckbox,colorpicker:c.ControlColorPicker,attach_image:c.ControlImageUpload};return new(n[e]?n[e]:n.base)(t)}}),c.ControlCheckbox=c.ControlBase.extend({template:i.template("controls/checkbox"),bindInput:function(){var e=this.model;this.$("#param-".concat(e.get("param_name"))).prop("checked")&&e.set("data",this.$("#param-".concat(e.get("param_name"))).val()),this.$("#param-".concat(e.get("param_name"))).on("change",function(){a()(this).prop("checked")?e.set("data",a()(this).val()):e.unset("data")})}}),c.ControlColorPicker=c.ControlBase.extend({template:i.template("controls/color-picker"),render:function(){return this.renderSuper(),this.$(".wp-color-picker").wpColorPicker({change:this.colorChange.bind(this)}),this},colorChange:function(e,t){this.model.set("data",t.color.toString())},bindInput:function(){}}),c.ControlDropdown=c.ControlBase.extend({template:i.template("controls/dropdown"),initialize:function(){this.model.set("selected",this.model.get("default_value")||l(this.model.get("value")).find(function(){return!0}))}}),c.ControlImageUpload=c.ControlBase.extend({initialize:function(){c.ControlImageUpload.createMediaFrame()},events:{"click a.csg-img-control.set":"setImage","click a.csg-img-control.remove":"removeImage"},template:i.template("controls/image-upload"),setImage:function(e){var t=this;e&&e.preventDefault();var n=c.ControlImageUpload.uploader;n.off("insert"),n.on("insert",function(){var e=n.state().get("selection").first().toJSON();t.$("a.csg-img-control.set").addClass("hidden"),t.$("a.csg-img-control.remove").removeClass("hidden"),t.$(".csg-image-uploader").css({"background-image":"url(".concat(e.url,")")}),t.$("input").val(e.url).change()}),n.open()},removeImage:function(e){e&&e.preventDefault(),this.$("a.csg-img-control.set").removeClass("hidden"),this.$("a.csg-img-control.remove").addClass("hidden"),this.$(".csg-image-uploader").css({"background-image":"none"}),this.$("input").val("")}},{uploader:null,createMediaFrame:function(){null===this.uploader&&(this.uploader=window.wp.media({frame:"post",state:"insert",multiple:!1}))}}),c.ControlTextArea=c.ControlBase.extend({template:i.template("controls/text-area")}),c.ControlText=c.ControlBase.extend({}),c.ControlGroup=s.View.extend({className:"csg-modal-controls",render:function(){return this.collection.each(function(e){this.$el.append(c.ControlBase.makeControl(e.get("type"),{model:e}).render().$el)},this),this}}),c.NavItem=s.View.extend({tagName:"li",events:{click:"click"},className:"csg-nav-item",render:function(){return this.$el.html(a()('<a href="#">'.concat(this.model.get("title"),"</a>"))),this},click:function(){this.model.setSelected()}}),c.NavSection=s.View.extend({className:"csg-nav-section",render:function(){return this.$el.append(a()("<ul></ul>")),this.collection.each(function(e){this.$("ul").append(new c.NavItem({model:e}).render().$el)},this),this}}),c.Nav=s.View.extend({className:"csg-navigation",events:{"click li.csg-nav-item a":"click"},render:function(){var e=this;return l(window.csgData.sectionNames).each(function(t){e.$el.append("<h3>".concat(t,"</h3>")),e.$el.append(new c.NavSection({collection:e.collection.section(t)}).render().$el)}),this.$el.accordion({heightStyle:"content"}),this},click:function(e){this.$("li.csg-nav-item a").removeClass("active"),this.$(e.target).addClass("active")}}),c.Preview=s.View.extend({className:"csg-preview",template:i.template("preview"),render:function(){return this.$el.html(this.template(l.extend(this.model.toJSON(),this.data))),this}}),c.Window=s.View.extend({className:"csg-modal-window",template:i.template("blank-state"),initialize:function(e){this.shortcode=e.shortcode},render:function(){return null===this.shortcode?(this.$el.html(this.template()),this):(this.$el.append(new c.ControlGroup({collection:this.collection}).render().$el),this.$el.append(new c.Preview({model:this.shortcode}).render().$el),this)}}),c.Modal=s.View.extend({id:"csgModal",className:"csg",template:i.template("modal"),events:{"click .csg-modal-close":"close","click .csg-modal-toggle-advanced":"toggleAdvanced","click #btn-ok":"insertShortcode"},controls:null,initialize:function(e){this.controller=e.controller,this.listenTo(this.collection,"change:completed",this.render),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"new_selection",this.setupControls),this.on("controls_ready",this.renderWindow),this.collection.fetch({reset:!0}),this.render()},render:function(){var e=this;this.$el.html(this.template()),this.$(".csg-modal-sidebar").append(new c.Nav({collection:this.collection}).render().$el),this.renderWindow(),this.getAdvancedState()&&this.setAdvancedState(!0),a()("body").append(this.$el).css({overflow:"hidden"}),this.$el.focus(),a()(document).on("focusin",function(t){e.$el[0]===t.target||e.$el.has(t.target).length||e.$el.focus()})},setupControls:function(){this.controls=new r.ControlCollection(this.collection.selected.get("params")),this.trigger("controls_ready")},renderWindow:function(){null!==this.collection.selected&&this.$("#btn-ok").prop("disabled",!1),this.$(".csg-modal-main").html(new c.Window({collection:this.controls,shortcode:this.collection.selected}).render().$el)},close:function(e){e&&e.preventDefault(),this.collection.selected=null,this.undelegateEvents(),a()(document).off("focusin",this.preserveFocus),a()("body").css({overflow:"auto"}),this.remove(),this.controller.deleteModal()},toggleAdvanced:function(e){e&&e.preventDefault(),this.setAdvancedState(!this.getAdvancedState())},getAdvancedState:function(){return"undefined"!=typeof Storage?(void 0===window.localStorage["csg-advanced-mode"]&&(window.localStorage["csg-advanced-mode"]=!1),"true"===window.localStorage["csg-advanced-mode"]):this.$el.hasClass("csg-advanced-enabled")},setAdvancedState:function(e){this.$(".csg-modal-toggle-advanced").removeClass("active"),this.$el.removeClass("csg-advanced-enabled"),e&&(this.$(".csg-modal-toggle-advanced").addClass("active"),this.$el.addClass("csg-advanced-enabled")),window.localStorage["csg-advanced-mode"]=e},insertShortcode:function(){var e={},t="",n=this.collection.selected.get("container")||!1;this.controls.each(function(o){var a=o.get("data"),i=o.get("param_name");if("content"===i&&(n=!0),void 0!==a&&""!==a){if("content"===i)return void(t=a);e[i]=a}});var o=this.collection.selected.get("id"),a="[".concat(o);l(e).each(function(e,t){a+=" ".concat(t,'="').concat(e,'"')}),a+="]",t&&(a+=t),n&&(a+="[/".concat(o,"]")),console.log("Inserting Shortcode: ".concat(a)),window.wp.media.editor.insert(a),this.close()}});var d=function(){var e=this;a()(window).on("load",function(){e.shortcodes=new r.ShortcodeCollection,e.shortcodes.fetch({reset:!0})}),a()(document).on("click","#cs-insert-shortcode-button",function(t){t.preventDefault(),e.openModal()})};d.prototype.openModal=function(){void 0===this.modalView&&(this.modalView=new c.Modal({collection:this.shortcodes,controller:this}))},d.prototype.deleteModal=function(){this.modalView=void 0},new d}});
//# sourceMappingURL=generator.13a2f57.js.map